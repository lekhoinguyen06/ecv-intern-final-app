(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,6919,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return i}});let i=e=>{}},76823,e=>{"use strict";function t(e){return Object.entries(e).map(([e,t])=>({Name:e,Value:t}))}function r(e){let t={};return e?.forEach(e=>{e.Name&&(t[e.Name]=e.Value)}),t}e.s(["toAttributeType",()=>t,"toAuthUserAttribute",()=>r])},70295,e=>{"use strict";var t=e.i(26799),r=e.i(95173),i=e.i(57646);let s=async e=>{var t;let s=e.getConfig().Auth?.Cognito;(0,r.assertTokenProviderConfig)(s);let a=await e.Auth.getTokens({forceRefresh:!1});(0,i.assertAuthTokens)(a);let{"cognito:username":o,sub:n}=a.idToken?.payload??{},l={username:o,userId:n},c=(t=a,t?.signInDetails);return c&&(l.signInDetails=c),l},a=async()=>s(t.Amplify);e.s(["getCurrentUser",()=>a],70295)},11589,66820,e=>{"use strict";var t=e.i(26799);let r=e=>{let r;return r=t.Amplify,r.Auth.fetchAuthSession(e)};e.s(["fetchAuthSession",()=>r],11589);var i=e.i(95173),s=e.i(69675),a=e.i(29423),o=e.i(57646),n=e.i(76823),l=e.i(49147),c=e.i(93968),d=e.i(9994),u=e.i(14970),h=e.i(98531),m=e.i(14258),f=e.i(93420);let g=async e=>{let t,r,g=e.getConfig().Auth?.Cognito;(0,i.assertTokenProviderConfig)(g);let{userPoolEndpoint:p,userPoolId:x}=g,{tokens:y}=await (t={forceRefresh:!1},e.Auth.fetchAuthSession(t));(0,o.assertAuthTokens)(y);let A=(r={endpointResolver:(0,f.createCognitoUserPoolEndpointResolver)({endpointOverride:p})},(0,c.composeServiceApi)(d.cognitoUserPoolTransferHandler,(0,u.createUserPoolSerializer)("GetUser"),(0,h.createUserPoolDeserializer)(),{...m.DEFAULT_SERVICE_CLIENT_API_CONFIG,...r})),{UserAttributes:w}=await A({region:(0,a.getRegionFromUserPoolId)(x),userAgentValue:(0,l.getAuthUserAgentValue)(s.AuthAction.FetchUserAttributes)},{AccessToken:y.accessToken.toString()});return(0,n.toAuthUserAttribute)(w)},p=()=>g(t.Amplify);e.s(["fetchUserAttributes",()=>p],66820)},17181,10965,84244,88297,87524,e=>{"use strict";var t=e.i(29511),r=e.i(58138),i=e.i(10641),s=e.i(16755),a=e.i(74734),o=e.i(26799);function n(){return o.Amplify.Auth.clearCredentials()}var l=e.i(72429),c=e.i(580),d=e.i(95173),u=e.i(69675),h=e.i(49147),m=e.i(37422),f=e.i(48145),g=e.i(85032),p=e.i(29423),x=e.i(57646);e.i(11795);let y=async e=>{await e.clearOAuthData(),g.tokenOrchestrator.clearTokens(),await n(),l.Hub.dispatch("auth",{event:"signedOut"},"Auth",l.AMPLIFY_SYMBOL)},A=async e=>{window?.location&&(window.location.href=e.replace("http://","https://"))};var w=e.i(48050);let k=e=>e.startsWith(String(window.location.origin+(window.location.pathname||"/"))),v=e=>e.includes(String(window.location.hostname)),j=e=>e.startsWith("http://"),b=e=>e.startsWith("https://"),C=async(e,t=!1,r)=>{(0,d.assertOAuthConfig)(e);let{loginWith:i,userPoolClientId:s}=e,{domain:a,redirectSignOut:o}=i.oauth,n=function(e,t){if(t){let r=e?.find(e=>e===t);if(!r)throw w.invalidPreferredRedirectUrlException;return r}{let t=e?.find(k)??e?.find(v),r=e?.find(b)??e?.find(j);if(t)return t;if(r)throw w.invalidOriginException;throw w.invalidRedirectException}}(o,r);return A(`https://${a}/logout?${Object.entries({client_id:s,logout_uri:encodeURIComponent(n)}).map(([e,t])=>`${e}=${t}`).join("&")}`)},N=async(e,t,r,i)=>{let{isOAuthSignIn:s}=await t.loadOAuthSignIn(),a=await r.getOAuthMetadata();if(await y(t),s||a?.oauthSignIn)return C(e,!1,i)};var T=e.i(93968),U=e.i(9994),S=e.i(14970),P=e.i(98531),O=e.i(14258),E=e.i(93420);let I=new a.ConsoleLogger("Auth");async function R(e){let t,r=o.Amplify.getConfig().Auth?.Cognito;(0,d.assertTokenProviderConfig)(r),e?.global?await _(r):await L(r);try{(0,d.assertOAuthConfig)(r),t=!0}catch(e){t=!1}if(t){let t=new f.DefaultOAuthStore(c.defaultStorage);t.setAuthConfig(r);let{type:i}=await N(r,t,g.tokenOrchestrator,e?.oauth?.redirectUrl)??{};if("error"===i)throw new m.AuthError({name:w.OAUTH_SIGNOUT_EXCEPTION,message:"An error occurred when attempting to log out from OAuth provider."})}else g.tokenOrchestrator.clearTokens(),await n(),l.Hub.dispatch("auth",{event:"signedOut"},"Auth",l.AMPLIFY_SYMBOL)}async function L(e){try{let{userPoolEndpoint:t,userPoolId:r,userPoolClientId:i}=e,s=await g.tokenOrchestrator.getTokenStore().loadTokens();if((0,x.assertAuthTokensWithRefreshToken)(s),z(s.accessToken)){let e,a=(e={endpointResolver:(0,E.createCognitoUserPoolEndpointResolver)({endpointOverride:t})},(0,T.composeServiceApi)(U.cognitoUserPoolTransferHandler,(0,S.createUserPoolSerializer)("RevokeToken"),(0,P.createUserPoolDeserializer)(),{...O.DEFAULT_SERVICE_CLIENT_API_CONFIG,...e}));await a({region:(0,p.getRegionFromUserPoolId)(r),userAgentValue:(0,h.getAuthUserAgentValue)(u.AuthAction.SignOut)},{ClientId:i,Token:s.refreshToken})}}catch(e){I.debug("Client signOut error caught but will proceed with token removal")}}async function _(e){try{let t,{userPoolEndpoint:r,userPoolId:i}=e,s=await g.tokenOrchestrator.getTokenStore().loadTokens();(0,x.assertAuthTokens)(s);let a=(t={endpointResolver:(0,E.createCognitoUserPoolEndpointResolver)({endpointOverride:r})},(0,T.composeServiceApi)(U.cognitoUserPoolTransferHandler,(0,S.createUserPoolSerializer)("GlobalSignOut"),(0,P.createUserPoolDeserializer)(),{...O.DEFAULT_SERVICE_CLIENT_API_CONFIG,...t}));await a({region:(0,p.getRegionFromUserPoolId)(i),userAgentValue:(0,h.getAuthUserAgentValue)(u.AuthAction.SignOut)},{AccessToken:s.accessToken.toString()})}catch(e){I.debug("Global signOut error caught but will proceed with token removal")}}let z=e=>!!e?.payload?.origin_jti,F=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();var M={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let V=(0,r.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:i=2,absoluteStrokeWidth:s,className:a="",children:o,iconNode:n,...l},c)=>(0,r.createElement)("svg",{ref:c,...M,width:t,height:t,stroke:e,strokeWidth:s?24*Number(i)/Number(t):i,className:F("lucide",a),...l},[...n.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(o)?o:[o]])),B=(e,t)=>{let i=(0,r.forwardRef)(({className:i,...s},a)=>(0,r.createElement)(V,{ref:a,iconNode:t,className:F(`lucide-${e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,i),...s}));return i.displayName=`${e}`,i};e.s(["default",()=>B],10965);let H=B("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),D=B("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),$=B("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>$],84244);let G=B("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),W=B("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);var Y=e.i(67881),q=e.i(47163);let K=[{name:"Home",href:"/home",icon:D},{name:"Profile",href:"/profile",icon:$},{name:"Settings",href:"/settings",icon:G}];function X({children:e}){let[a,o]=(0,r.useState)(!1),n=(0,s.usePathname)(),l=(0,s.useRouter)(),c=async()=>{try{await R(),localStorage.removeItem("userProfile"),l.push("/signin")}catch(e){console.error("Error signing out:",e)}};return(0,t.jsxs)("div",{className:"flex min-h-screen w-full",children:[(0,t.jsx)("aside",{className:"hidden w-64 shrink-0 border-r border-border bg-white md:block",children:(0,t.jsxs)("div",{className:"flex h-full flex-col",children:[(0,t.jsx)("div",{className:"border-b border-border p-6",children:(0,t.jsx)("h1",{className:"text-xl font-semibold",children:"User Profile App"})}),(0,t.jsx)("nav",{className:"flex-1 space-y-1 p-4",children:K.map(e=>{let r=n===e.href;return(0,t.jsxs)(i.default,{href:e.href,className:(0,q.cn)("flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium transition-colors",r?"bg-primary text-primary-foreground":"text-foreground hover:bg-accent hover:text-accent-foreground"),children:[(0,t.jsx)(e.icon,{className:"h-5 w-5"}),e.name]},e.name)})}),(0,t.jsx)("div",{className:"border-t border-border p-4",children:(0,t.jsxs)(Y.Button,{variant:"ghost",className:"w-full justify-start",onClick:c,children:[(0,t.jsx)(W,{className:"mr-3 h-5 w-5"}),"Logout"]})})]})}),a&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden",onClick:()=>o(!1)}),(0,t.jsx)("aside",{className:"fixed inset-y-0 left-0 z-50 w-64 border-r border-border bg-white md:hidden",children:(0,t.jsxs)("div",{className:"flex h-full flex-col",children:[(0,t.jsx)("div",{className:"border-b border-border p-6",children:(0,t.jsx)("h1",{className:"text-xl font-semibold",children:"User Profile App"})}),(0,t.jsx)("nav",{className:"flex-1 space-y-1 p-4",children:K.map(e=>{let r=n===e.href;return(0,t.jsxs)(i.default,{href:e.href,onClick:()=>o(!1),className:(0,q.cn)("flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium transition-colors",r?"bg-primary text-primary-foreground":"text-foreground hover:bg-accent hover:text-accent-foreground"),children:[(0,t.jsx)(e.icon,{className:"h-5 w-5"}),e.name]},e.name)})}),(0,t.jsx)("div",{className:"border-t border-border p-4",children:(0,t.jsxs)(Y.Button,{variant:"ghost",className:"w-full justify-start",onClick:c,children:[(0,t.jsx)(W,{className:"mr-3 h-5 w-5"}),"Logout"]})})]})})]}),(0,t.jsxs)("div",{className:"flex flex-1 flex-col",children:[(0,t.jsxs)("header",{className:"flex h-16 items-center gap-4 border-b border-border bg-white px-6",children:[(0,t.jsx)(Y.Button,{variant:"ghost",size:"icon",className:"md:hidden",onClick:()=>o(!0),children:(0,t.jsx)(H,{className:"h-5 w-5"})}),(0,t.jsx)("div",{className:"flex-1"})]}),(0,t.jsx)("main",{className:"flex-1 overflow-y-auto p-6",children:e})]})]})}e.s(["AppLayout",()=>X],17181);let Z=B("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>Z],88297);let J=B("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>J],87524)},90768,e=>{"use strict";let t=(0,e.i(10965).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],90768)},20307,e=>{"use strict";var t=e.i(29511),r=e.i(58138),i=e.i(16755),s=e.i(70295),a=e.i(11589),o=e.i(66820),n=e.i(17181),l=e.i(70065),c=e.i(67881),d=e.i(84244),u=e.i(88297),h=e.i(87524),m=e.i(90768);function f(){let e=(0,i.useRouter)(),[f,g]=(0,r.useState)(!1),[p,x]=(0,r.useState)(null),[y,A]=(0,r.useState)(!0);(0,r.useEffect)(()=>{w()},[]);let w=async()=>{try{A(!0);let{username:e}=await (0,s.getCurrentUser)(),t=await (0,o.fetchUserAttributes)();x(e);let r=await (0,a.fetchAuthSession)(),i=r.tokens?.accessToken?.toString();if(!i)throw Error("No session token found");let n=new URLSearchParams({email:t.email||""}),l=await fetch(`http://ecv-intern-alb-169112893.ap-southeast-1.elb.amazonaws.com/api/user?${n.toString()}`,{method:"GET",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"}});if(l.ok){let e=await l.json(),t=e.data||e,r=t.name&&t.age&&t.sex&&t.jobTitle&&t.description&&(Array.isArray(t.studies)?t.studies.length>0:t.studies)&&(Array.isArray(t.interests)?t.interests.length>0:t.interests);g(!!r)}else 404===l.status||console.warn("Unexpected API response:",l.status),g(!1)}catch(t){console.error("Error:",t),("UserUnAuthenticatedException"===t.name||t.message?.includes("authenticated")||String(t).includes("User not signed in"))&&e.push("/signin")}finally{A(!1)}};return y?(0,t.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,t.jsx)(m.Loader2,{className:"h-8 w-8 animate-spin text-primary"})}):(0,t.jsx)(n.AppLayout,{children:(0,t.jsxs)("div",{className:"mx-auto max-w-2xl space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold",children:["Welcome Back, ",p,"!"]}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Manage your personal profile information"})]}),(0,t.jsxs)(l.Card,{children:[(0,t.jsxs)(l.CardHeader,{children:[(0,t.jsxs)(l.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(d.User,{className:"h-5 w-5"}),"Profile Status"]}),(0,t.jsx)(l.CardDescription,{children:"Check your profile completion status"})]}),(0,t.jsxs)(l.CardContent,{className:"space-y-4",children:[(0,t.jsx)("div",{className:"flex items-center gap-3",children:f?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.CheckCircle,{className:"h-5 w-5 text-green-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Profile Complete"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Your information is up to date."})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.AlertCircle,{className:"h-5 w-5 text-yellow-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Profile Incomplete"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"You need to fill in all information."})]})]})}),(0,t.jsx)(c.Button,{onClick:()=>e.push("/profile"),className:"w-full",children:f?"View Profile":"Complete Profile"})]})]})]})})}e.s(["default",()=>f])}]);