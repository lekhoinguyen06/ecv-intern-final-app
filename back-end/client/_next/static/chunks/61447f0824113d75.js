(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,6919,(e,r,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"warnOnce",{enumerable:!0,get:function(){return s}});let s=e=>{}},76823,e=>{"use strict";function r(e){return Object.entries(e).map(([e,r])=>({Name:e,Value:r}))}function t(e){let r={};return e?.forEach(e=>{e.Name&&(r[e.Name]=e.Value)}),r}e.s(["toAttributeType",()=>r,"toAuthUserAttribute",()=>t])},70295,e=>{"use strict";var r=e.i(26799),t=e.i(95173),s=e.i(57646);let i=async e=>{var r;let i=e.getConfig().Auth?.Cognito;(0,t.assertTokenProviderConfig)(i);let a=await e.Auth.getTokens({forceRefresh:!1});(0,s.assertAuthTokens)(a);let{"cognito:username":o,sub:n}=a.idToken?.payload??{},l={username:o,userId:n},d=(r=a,r?.signInDetails);return d&&(l.signInDetails=d),l},a=async()=>i(r.Amplify);e.s(["getCurrentUser",()=>a],70295)},23750,20673,10708,e=>{"use strict";var r=e.i(29511),t=e.i(47163);function s({className:e,type:s,...i}){return(0,r.jsx)("input",{type:s,"data-slot":"input",className:(0,t.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...i})}e.s(["Input",()=>s],23750);var i=e.i(58138),a=e.i(49463),o=e.i(64701),n=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let s=i.forwardRef((e,s)=>{let{asChild:i,...a}=e,n=i?o.Slot:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,r.jsx)(n,{...a,ref:s})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function l(e,r){e&&a.flushSync(()=>e.dispatchEvent(r))}e.s(["Primitive",()=>n,"dispatchDiscreteCustomEvent",()=>l],20673);var d=i.forwardRef((e,t)=>(0,r.jsx)(n.label,{...e,ref:t,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(e.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));function c({className:e,...s}){return(0,r.jsx)(d,{"data-slot":"label",className:(0,t.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...s})}d.displayName="Label",e.s(["Label",()=>c],10708)},86131,30811,7846,e=>{"use strict";(t=a||(a={})).EmptySignInUsername="EmptySignInUsername",t.EmptySignInPassword="EmptySignInPassword",t.CustomAuthSignInPassword="CustomAuthSignInPassword",t.EmptySignUpUsername="EmptySignUpUsername",t.EmptySignUpPassword="EmptySignUpPassword",t.EmptyConfirmSignUpUsername="EmptyConfirmSignUpUsername",t.EmptyConfirmSignUpCode="EmptyConfirmSignUpCode",t.EmptyResendSignUpCodeUsername="EmptyresendSignUpCodeUsername",t.EmptyChallengeResponse="EmptyChallengeResponse",t.EmptyConfirmResetPasswordUsername="EmptyConfirmResetPasswordUsername",t.EmptyConfirmResetPasswordNewPassword="EmptyConfirmResetPasswordNewPassword",t.EmptyConfirmResetPasswordConfirmationCode="EmptyConfirmResetPasswordConfirmationCode",t.EmptyResetPasswordUsername="EmptyResetPasswordUsername",t.EmptyVerifyTOTPSetupCode="EmptyVerifyTOTPSetupCode",t.EmptyConfirmUserAttributeCode="EmptyConfirmUserAttributeCode",t.IncorrectMFAMethod="IncorrectMFAMethod",t.EmptyUpdatePassword="EmptyUpdatePassword",e.s(["AuthValidationErrorCode",()=>a],30811);let r={[a.EmptyChallengeResponse]:{message:"challengeResponse is required to confirmSignIn"},[a.EmptyConfirmResetPasswordUsername]:{message:"username is required to confirmResetPassword"},[a.EmptyConfirmSignUpCode]:{message:"code is required to confirmSignUp"},[a.EmptyConfirmSignUpUsername]:{message:"username is required to confirmSignUp"},[a.EmptyConfirmResetPasswordConfirmationCode]:{message:"confirmationCode is required to confirmResetPassword"},[a.EmptyConfirmResetPasswordNewPassword]:{message:"newPassword is required to confirmResetPassword"},[a.EmptyResendSignUpCodeUsername]:{message:"username is required to confirmSignUp"},[a.EmptyResetPasswordUsername]:{message:"username is required to resetPassword"},[a.EmptySignInPassword]:{message:"password is required to signIn"},[a.EmptySignInUsername]:{message:"username is required to signIn"},[a.EmptySignUpPassword]:{message:"password is required to signUp"},[a.EmptySignUpUsername]:{message:"username is required to signUp"},[a.CustomAuthSignInPassword]:{message:"A password is not needed when signing in with CUSTOM_WITHOUT_SRP",recoverySuggestion:"Do not include a password in your signIn call."},[a.IncorrectMFAMethod]:{message:"Incorrect MFA method was chosen. It should be either SMS, TOTP, or EMAIL",recoverySuggestion:"Try to pass SMS, TOTP, or EMAIL as the challengeResponse"},[a.EmptyVerifyTOTPSetupCode]:{message:"code is required to verifyTotpSetup"},[a.EmptyUpdatePassword]:{message:"oldPassword and newPassword are required to changePassword"},[a.EmptyConfirmUserAttributeCode]:{message:"confirmation code is required to confirmUserAttribute"}};(s=o||(o={})).DEFAULT_MSG="Authentication Error",s.EMPTY_EMAIL="Email cannot be empty",s.EMPTY_PHONE="Phone number cannot be empty",s.EMPTY_USERNAME="Username cannot be empty",s.INVALID_USERNAME="The username should either be a string or one of the sign in types",s.EMPTY_PASSWORD="Password cannot be empty",s.EMPTY_CODE="Confirmation code cannot be empty",s.SIGN_UP_ERROR="Error creating account",s.NO_MFA="No valid MFA method provided",s.INVALID_MFA="Invalid MFA type",s.EMPTY_CHALLENGE="Challenge response cannot be empty",s.NO_USER_SESSION="Failed to get the session because the user is empty",s.NETWORK_ERROR="Network Error",s.DEVICE_CONFIG="Device tracking has not been configured in this User Pool",s.AUTOSIGNIN_ERROR="Please use your credentials to sign in",s.OAUTH_ERROR="Couldn't finish OAuth flow, check your User Pool HostedUI settings",(i=n||(n={})).SignInException="SignInException",i.OAuthSignInError="OAuthSignInException",e.s(["AuthErrorCodes",()=>n,"validationErrorMap",()=>r],7846);var t,s,i,a,o,n,l=e.i(37422);function d(e,t){let{message:s,recoverySuggestion:i}=r[t];if(!e)throw new l.AuthError({name:t,message:s,recoverySuggestion:i})}e.s(["assertValidationError",()=>d],86131)},17181,10965,84244,88297,87524,e=>{"use strict";var r=e.i(29511),t=e.i(58138),s=e.i(10641),i=e.i(16755),a=e.i(74734),o=e.i(26799);function n(){return o.Amplify.Auth.clearCredentials()}var l=e.i(72429),d=e.i(580),c=e.i(95173),u=e.i(69675),m=e.i(49147),h=e.i(37422),p=e.i(48145),g=e.i(85032),f=e.i(29423),y=e.i(57646);e.i(11795);let w=async e=>{await e.clearOAuthData(),g.tokenOrchestrator.clearTokens(),await n(),l.Hub.dispatch("auth",{event:"signedOut"},"Auth",l.AMPLIFY_SYMBOL)},x=async e=>{window?.location&&(window.location.href=e.replace("http://","https://"))};var v=e.i(48050);let A=e=>e.startsWith(String(window.location.origin+(window.location.pathname||"/"))),b=e=>e.includes(String(window.location.hostname)),C=e=>e.startsWith("http://"),E=e=>e.startsWith("https://"),P=async(e,r=!1,t)=>{(0,c.assertOAuthConfig)(e);let{loginWith:s,userPoolClientId:i}=e,{domain:a,redirectSignOut:o}=s.oauth,n=function(e,r){if(r){let t=e?.find(e=>e===r);if(!t)throw v.invalidPreferredRedirectUrlException;return t}{let r=e?.find(A)??e?.find(b),t=e?.find(E)??e?.find(C);if(r)return r;if(t)throw v.invalidOriginException;throw v.invalidRedirectException}}(o,t);return x(`https://${a}/logout?${Object.entries({client_id:i,logout_uri:encodeURIComponent(n)}).map(([e,r])=>`${e}=${r}`).join("&")}`)},S=async(e,r,t,s)=>{let{isOAuthSignIn:i}=await r.loadOAuthSignIn(),a=await t.getOAuthMetadata();if(await w(r),i||a?.oauthSignIn)return P(e,!1,s)};var U=e.i(93968),N=e.i(9994),j=e.i(14970),k=e.i(98531),T=e.i(14258),I=e.i(93420);let R=new a.ConsoleLogger("Auth");async function O(e){let r,t=o.Amplify.getConfig().Auth?.Cognito;(0,c.assertTokenProviderConfig)(t),e?.global?await M(t):await _(t);try{(0,c.assertOAuthConfig)(t),r=!0}catch(e){r=!1}if(r){let r=new p.DefaultOAuthStore(d.defaultStorage);r.setAuthConfig(t);let{type:s}=await S(t,r,g.tokenOrchestrator,e?.oauth?.redirectUrl)??{};if("error"===s)throw new h.AuthError({name:v.OAUTH_SIGNOUT_EXCEPTION,message:"An error occurred when attempting to log out from OAuth provider."})}else g.tokenOrchestrator.clearTokens(),await n(),l.Hub.dispatch("auth",{event:"signedOut"},"Auth",l.AMPLIFY_SYMBOL)}async function _(e){try{let{userPoolEndpoint:r,userPoolId:t,userPoolClientId:s}=e,i=await g.tokenOrchestrator.getTokenStore().loadTokens();if((0,y.assertAuthTokensWithRefreshToken)(i),L(i.accessToken)){let e,a=(e={endpointResolver:(0,I.createCognitoUserPoolEndpointResolver)({endpointOverride:r})},(0,U.composeServiceApi)(N.cognitoUserPoolTransferHandler,(0,j.createUserPoolSerializer)("RevokeToken"),(0,k.createUserPoolDeserializer)(),{...T.DEFAULT_SERVICE_CLIENT_API_CONFIG,...e}));await a({region:(0,f.getRegionFromUserPoolId)(t),userAgentValue:(0,m.getAuthUserAgentValue)(u.AuthAction.SignOut)},{ClientId:s,Token:i.refreshToken})}}catch(e){R.debug("Client signOut error caught but will proceed with token removal")}}async function M(e){try{let r,{userPoolEndpoint:t,userPoolId:s}=e,i=await g.tokenOrchestrator.getTokenStore().loadTokens();(0,y.assertAuthTokens)(i);let a=(r={endpointResolver:(0,I.createCognitoUserPoolEndpointResolver)({endpointOverride:t})},(0,U.composeServiceApi)(N.cognitoUserPoolTransferHandler,(0,j.createUserPoolSerializer)("GlobalSignOut"),(0,k.createUserPoolDeserializer)(),{...T.DEFAULT_SERVICE_CLIENT_API_CONFIG,...r}));await a({region:(0,f.getRegionFromUserPoolId)(s),userAgentValue:(0,m.getAuthUserAgentValue)(u.AuthAction.SignOut)},{AccessToken:i.accessToken.toString()})}catch(e){R.debug("Global signOut error caught but will proceed with token removal")}}let L=e=>!!e?.payload?.origin_jti,F=(...e)=>e.filter((e,r,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===r).join(" ").trim();var D={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let V=(0,t.forwardRef)(({color:e="currentColor",size:r=24,strokeWidth:s=2,absoluteStrokeWidth:i,className:a="",children:o,iconNode:n,...l},d)=>(0,t.createElement)("svg",{ref:d,...D,width:r,height:r,stroke:e,strokeWidth:i?24*Number(s)/Number(r):s,className:F("lucide",a),...l},[...n.map(([e,r])=>(0,t.createElement)(e,r)),...Array.isArray(o)?o:[o]])),z=(e,r)=>{let s=(0,t.forwardRef)(({className:s,...i},a)=>(0,t.createElement)(V,{ref:a,iconNode:r,className:F(`lucide-${e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,s),...i}));return s.displayName=`${e}`,s};e.s(["default",()=>z],10965);let q=z("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),H=z("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),$=z("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>$],84244);let G=z("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),B=z("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);var Y=e.i(67881),W=e.i(47163);let X=[{name:"Home",href:"/home",icon:H},{name:"Profile",href:"/profile",icon:$},{name:"Settings",href:"/settings",icon:G}];function K({children:e}){let[a,o]=(0,t.useState)(!1),n=(0,i.usePathname)(),l=(0,i.useRouter)(),d=async()=>{try{await O(),localStorage.removeItem("userProfile"),l.push("/signin")}catch(e){console.error("Error signing out:",e)}};return(0,r.jsxs)("div",{className:"flex min-h-screen w-full",children:[(0,r.jsx)("aside",{className:"hidden w-64 shrink-0 border-r border-border bg-white md:block",children:(0,r.jsxs)("div",{className:"flex h-full flex-col",children:[(0,r.jsx)("div",{className:"border-b border-border p-6",children:(0,r.jsx)("h1",{className:"text-xl font-semibold",children:"User Profile App"})}),(0,r.jsx)("nav",{className:"flex-1 space-y-1 p-4",children:X.map(e=>{let t=n===e.href;return(0,r.jsxs)(s.default,{href:e.href,className:(0,W.cn)("flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium transition-colors",t?"bg-primary text-primary-foreground":"text-foreground hover:bg-accent hover:text-accent-foreground"),children:[(0,r.jsx)(e.icon,{className:"h-5 w-5"}),e.name]},e.name)})}),(0,r.jsx)("div",{className:"border-t border-border p-4",children:(0,r.jsxs)(Y.Button,{variant:"ghost",className:"w-full justify-start",onClick:d,children:[(0,r.jsx)(B,{className:"mr-3 h-5 w-5"}),"Logout"]})})]})}),a&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden",onClick:()=>o(!1)}),(0,r.jsx)("aside",{className:"fixed inset-y-0 left-0 z-50 w-64 border-r border-border bg-white md:hidden",children:(0,r.jsxs)("div",{className:"flex h-full flex-col",children:[(0,r.jsx)("div",{className:"border-b border-border p-6",children:(0,r.jsx)("h1",{className:"text-xl font-semibold",children:"User Profile App"})}),(0,r.jsx)("nav",{className:"flex-1 space-y-1 p-4",children:X.map(e=>{let t=n===e.href;return(0,r.jsxs)(s.default,{href:e.href,onClick:()=>o(!1),className:(0,W.cn)("flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium transition-colors",t?"bg-primary text-primary-foreground":"text-foreground hover:bg-accent hover:text-accent-foreground"),children:[(0,r.jsx)(e.icon,{className:"h-5 w-5"}),e.name]},e.name)})}),(0,r.jsx)("div",{className:"border-t border-border p-4",children:(0,r.jsxs)(Y.Button,{variant:"ghost",className:"w-full justify-start",onClick:d,children:[(0,r.jsx)(B,{className:"mr-3 h-5 w-5"}),"Logout"]})})]})})]}),(0,r.jsxs)("div",{className:"flex flex-1 flex-col",children:[(0,r.jsxs)("header",{className:"flex h-16 items-center gap-4 border-b border-border bg-white px-6",children:[(0,r.jsx)(Y.Button,{variant:"ghost",size:"icon",className:"md:hidden",onClick:()=>o(!0),children:(0,r.jsx)(q,{className:"h-5 w-5"})}),(0,r.jsx)("div",{className:"flex-1"})]}),(0,r.jsx)("main",{className:"flex-1 overflow-y-auto p-6",children:e})]})]})}e.s(["AppLayout",()=>K],17181);let J=z("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>J],88297);let Z=z("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>Z],87524)},11589,66820,e=>{"use strict";var r=e.i(26799);let t=e=>{let t;return t=r.Amplify,t.Auth.fetchAuthSession(e)};e.s(["fetchAuthSession",()=>t],11589);var s=e.i(95173),i=e.i(69675),a=e.i(29423),o=e.i(57646),n=e.i(76823),l=e.i(49147),d=e.i(93968),c=e.i(9994),u=e.i(14970),m=e.i(98531),h=e.i(14258),p=e.i(93420);let g=async e=>{let r,t,g=e.getConfig().Auth?.Cognito;(0,s.assertTokenProviderConfig)(g);let{userPoolEndpoint:f,userPoolId:y}=g,{tokens:w}=await (r={forceRefresh:!1},e.Auth.fetchAuthSession(r));(0,o.assertAuthTokens)(w);let x=(t={endpointResolver:(0,p.createCognitoUserPoolEndpointResolver)({endpointOverride:f})},(0,d.composeServiceApi)(c.cognitoUserPoolTransferHandler,(0,u.createUserPoolSerializer)("GetUser"),(0,m.createUserPoolDeserializer)(),{...h.DEFAULT_SERVICE_CLIENT_API_CONFIG,...t})),{UserAttributes:v}=await x({region:(0,a.getRegionFromUserPoolId)(y),userAgentValue:(0,l.getAuthUserAgentValue)(i.AuthAction.FetchUserAttributes)},{AccessToken:w.accessToken.toString()});return(0,n.toAuthUserAttribute)(v)},f=()=>g(r.Amplify);e.s(["fetchUserAttributes",()=>f],66820)},34290,e=>{"use strict";let r=(0,e.i(10965).default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>r],34290)},32545,e=>{"use strict";e.i(68519);var r=e.i(29511),t=e.i(58138),s=e.i(16755),i=e.i(17181),a=e.i(70065),o=e.i(67881),n=e.i(23750),l=e.i(10708),d=e.i(20673),c="horizontal",u=["horizontal","vertical"],m=t.forwardRef((e,t)=>{var s;let{decorative:i,orientation:a=c,...o}=e,n=(s=a,u.includes(s))?a:c;return(0,r.jsx)(d.Primitive.div,{"data-orientation":n,...i?{role:"none"}:{"aria-orientation":"vertical"===n?n:void 0,role:"separator"},...o,ref:t})});m.displayName="Separator";var h=e.i(47163);function p({className:e,orientation:t="horizontal",decorative:s=!0,...i}){return(0,r.jsx)(m,{"data-slot":"separator",decorative:s,orientation:t,className:(0,h.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...i})}var g=e.i(88297),f=e.i(87524),y=e.i(34290),w=e.i(11589),x=e.i(26799),v=e.i(95173),A=e.i(69675),b=e.i(30811),C=e.i(86131),E=e.i(29423),P=e.i(57646),S=e.i(49147),U=e.i(93968),N=e.i(9994),j=e.i(14970),k=e.i(98531),T=e.i(14258),I=e.i(93420);async function R(e){let r,t=x.Amplify.getConfig().Auth?.Cognito;(0,v.assertTokenProviderConfig)(t);let{userPoolEndpoint:s,userPoolId:i}=t,{oldPassword:a,newPassword:o}=e;(0,C.assertValidationError)(!!a,b.AuthValidationErrorCode.EmptyUpdatePassword),(0,C.assertValidationError)(!!o,b.AuthValidationErrorCode.EmptyUpdatePassword);let{tokens:n}=await (0,w.fetchAuthSession)({forceRefresh:!1});(0,P.assertAuthTokens)(n);let l=(r={endpointResolver:(0,I.createCognitoUserPoolEndpointResolver)({endpointOverride:s})},(0,U.composeServiceApi)(N.cognitoUserPoolTransferHandler,(0,j.createUserPoolSerializer)("ChangePassword"),(0,k.createUserPoolDeserializer)(),{...T.DEFAULT_SERVICE_CLIENT_API_CONFIG,...r}));await l({region:(0,E.getRegionFromUserPoolId)(i),userAgentValue:(0,S.getAuthUserAgentValue)(A.AuthAction.UpdatePassword)},{AccessToken:n.accessToken.toString(),PreviousPassword:a,ProposedPassword:o})}var O=e.i(66820),_=e.i(70295);let M="http://ecv-intern-alb-169112893.ap-southeast-1.elb.amazonaws.com";function L(){let e=(0,s.useRouter)(),[d,c]=(0,t.useState)(""),[u,m]=(0,t.useState)(""),[h,x]=(0,t.useState)(""),[v,A]=(0,t.useState)(""),[b,C]=(0,t.useState)(""),[E,P]=(0,t.useState)(!0),[S,U]=(0,t.useState)(!1),[N,j]=(0,t.useState)(""),[k,T]=(0,t.useState)({show:!1,message:"",type:"success"}),I=(e,r="success")=>{T({show:!0,message:e,type:r}),setTimeout(()=>{T(e=>({...e,show:!1}))},3e3)};(0,t.useEffect)(()=>{L()},[]);let L=async()=>{try{P(!0);let{username:e}=await (0,_.getCurrentUser)();c(e);let r=(await (0,O.fetchUserAttributes)()).email;m(r||"");let t=await (0,w.fetchAuthSession)(),s=t.tokens?.accessToken?.toString();if(!s)throw Error("No session token found");let i=new URLSearchParams({email:r||""});await fetch(`${M}/api/user?${i.toString()}`,{method:"GET",headers:{Authorization:`Bearer ${s}`}})}catch(r){console.error("Error loading user data:",r),("UserUnAuthenticatedException"===r.name||r.message?.includes("authenticated")||String(r).includes("User not signed in"))&&e.push("/signin")}finally{P(!1)}},F=async e=>{e.preventDefault(),U(!0);try{let e=await (0,w.fetchAuthSession)(),r=e.tokens?.accessToken?.toString();if(!r)throw Error("Please login again");if(!(await fetch(`${M}/api/user`,{method:"PUT",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify({email:u,username:d})})).ok)throw Error("Failed to update profile");I("Account information updated successfully!","success")}catch(e){console.error("Update failed:",e),I("Failed to update. Please try again.","error")}finally{U(!1)}},D=async e=>{if(e.preventDefault(),j(""),v!==b)return void j("New passwords do not match");try{U(!0),await R({oldPassword:h,newPassword:v}),I("Password changed successfully!","success"),x(""),A(""),C("")}catch(e){console.error("Change password error:",e),j(e.message||"Failed to change password"),I(e.message||"Failed to change password","error")}finally{U(!1)}};return E?(0,r.jsx)(i.AppLayout,{children:(0,r.jsx)("div",{className:"flex h-[50vh] items-center justify-center",children:"Loading settings..."})}):(0,r.jsx)(i.AppLayout,{children:(0,r.jsxs)("div",{className:"mx-auto max-w-3xl space-y-6 relative",children:[k.show&&(0,r.jsxs)("div",{className:`fixed top-5 right-5 z-50 flex items-center gap-3 rounded-xl border p-4 shadow-xl transition-all duration-300 animate-in slide-in-from-right-10 bg-white ${"success"===k.type?"border-l-4 border-l-green-500":"border-l-4 border-l-red-500"}`,children:["success"===k.type?(0,r.jsx)("div",{className:"rounded-full bg-green-100 p-1",children:(0,r.jsx)(g.CheckCircle,{className:"h-5 w-5 text-green-600"})}):(0,r.jsx)("div",{className:"rounded-full bg-red-100 p-1",children:(0,r.jsx)(f.AlertCircle,{className:"h-5 w-5 text-red-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:`font-semibold ${"success"===k.type?"text-green-700":"text-red-700"}`,children:"success"===k.type?"Success":"Error"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:k.message})]}),(0,r.jsx)("button",{onClick:()=>T(e=>({...e,show:!1})),className:"ml-2 text-gray-400 hover:text-gray-600",children:(0,r.jsx)(y.X,{className:"h-4 w-4"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Account Settings"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Manage your account information and security"})]}),(0,r.jsxs)(a.Card,{children:[(0,r.jsxs)(a.CardHeader,{children:[(0,r.jsx)(a.CardTitle,{children:"Account Information"}),(0,r.jsx)(a.CardDescription,{children:"View your account details"})]}),(0,r.jsx)(a.CardContent,{children:(0,r.jsxs)("form",{onSubmit:F,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.Label,{htmlFor:"email",children:"Email"}),(0,r.jsx)(n.Input,{id:"email",type:"email",value:u,disabled:!0,className:"bg-muted"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Email cannot be changed directly."})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.Label,{htmlFor:"username",children:"Username (Cognito ID)"}),(0,r.jsx)(n.Input,{id:"username",type:"text",value:d,disabled:!0,className:"bg-muted"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"This is your unique Cognito ID and cannot be changed."})]})]})})]}),(0,r.jsxs)(a.Card,{children:[(0,r.jsxs)(a.CardHeader,{children:[(0,r.jsx)(a.CardTitle,{children:"Change Password"}),(0,r.jsx)(a.CardDescription,{children:"Update your password to keep your account secure"})]}),(0,r.jsx)(a.CardContent,{children:(0,r.jsxs)("form",{onSubmit:D,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.Label,{htmlFor:"currentPassword",children:"Current Password"}),(0,r.jsx)(n.Input,{id:"currentPassword",type:"password",value:h,onChange:e=>x(e.target.value),required:!0})]}),(0,r.jsx)(p,{}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.Label,{htmlFor:"newPassword",children:"New Password"}),(0,r.jsx)(n.Input,{id:"newPassword",type:"password",value:v,onChange:e=>A(e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.Label,{htmlFor:"confirmPassword",children:"Confirm New Password"}),(0,r.jsx)(n.Input,{id:"confirmPassword",type:"password",value:b,onChange:e=>C(e.target.value),required:!0})]}),N&&(0,r.jsx)("p",{className:"text-sm text-destructive",children:N}),(0,r.jsx)(o.Button,{type:"submit",disabled:S,children:S?"Updating...":"Change Password"})]})})]})]})})}e.s(["default",()=>L],32545)}]);