(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,6919,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return n}});let n=e=>{}},90768,e=>{"use strict";let t=(0,e.i(10965).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],90768)},76823,e=>{"use strict";function t(e){return Object.entries(e).map(([e,t])=>({Name:e,Value:t}))}function r(e){let t={};return e?.forEach(e=>{e.Name&&(t[e.Name]=e.Value)}),t}e.s(["toAttributeType",()=>t,"toAuthUserAttribute",()=>r])},70295,e=>{"use strict";var t=e.i(26799),r=e.i(95173),n=e.i(57646);let i=async e=>{var t;let i=e.getConfig().Auth?.Cognito;(0,r.assertTokenProviderConfig)(i);let s=await e.Auth.getTokens({forceRefresh:!1});(0,n.assertAuthTokens)(s);let{"cognito:username":o,sub:a}=s.idToken?.payload??{},l={username:o,userId:a},d=(t=s,t?.signInDetails);return d&&(l.signInDetails=d),l},s=async()=>i(t.Amplify);e.s(["getCurrentUser",()=>s],70295)},23750,20673,10708,e=>{"use strict";var t=e.i(29511),r=e.i(47163);function n({className:e,type:n,...i}){return(0,t.jsx)("input",{type:n,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...i})}e.s(["Input",()=>n],23750);var i=e.i(58138),s=e.i(49463),o=e.i(64701),a=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,r)=>{let n=i.forwardRef((e,n)=>{let{asChild:i,...s}=e,a=i?o.Slot:r;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(a,{...s,ref:n})});return n.displayName=`Primitive.${r}`,{...e,[r]:n}},{});function l(e,t){e&&s.flushSync(()=>e.dispatchEvent(t))}e.s(["Primitive",()=>a,"dispatchDiscreteCustomEvent",()=>l],20673);var d=i.forwardRef((e,r)=>(0,t.jsx)(a.label,{...e,ref:r,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));function u({className:e,...n}){return(0,t.jsx)(d,{"data-slot":"label",className:(0,r.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...n})}d.displayName="Label",e.s(["Label",()=>u],10708)},86131,30811,7846,e=>{"use strict";(r=s||(s={})).EmptySignInUsername="EmptySignInUsername",r.EmptySignInPassword="EmptySignInPassword",r.CustomAuthSignInPassword="CustomAuthSignInPassword",r.EmptySignUpUsername="EmptySignUpUsername",r.EmptySignUpPassword="EmptySignUpPassword",r.EmptyConfirmSignUpUsername="EmptyConfirmSignUpUsername",r.EmptyConfirmSignUpCode="EmptyConfirmSignUpCode",r.EmptyResendSignUpCodeUsername="EmptyresendSignUpCodeUsername",r.EmptyChallengeResponse="EmptyChallengeResponse",r.EmptyConfirmResetPasswordUsername="EmptyConfirmResetPasswordUsername",r.EmptyConfirmResetPasswordNewPassword="EmptyConfirmResetPasswordNewPassword",r.EmptyConfirmResetPasswordConfirmationCode="EmptyConfirmResetPasswordConfirmationCode",r.EmptyResetPasswordUsername="EmptyResetPasswordUsername",r.EmptyVerifyTOTPSetupCode="EmptyVerifyTOTPSetupCode",r.EmptyConfirmUserAttributeCode="EmptyConfirmUserAttributeCode",r.IncorrectMFAMethod="IncorrectMFAMethod",r.EmptyUpdatePassword="EmptyUpdatePassword",e.s(["AuthValidationErrorCode",()=>s],30811);let t={[s.EmptyChallengeResponse]:{message:"challengeResponse is required to confirmSignIn"},[s.EmptyConfirmResetPasswordUsername]:{message:"username is required to confirmResetPassword"},[s.EmptyConfirmSignUpCode]:{message:"code is required to confirmSignUp"},[s.EmptyConfirmSignUpUsername]:{message:"username is required to confirmSignUp"},[s.EmptyConfirmResetPasswordConfirmationCode]:{message:"confirmationCode is required to confirmResetPassword"},[s.EmptyConfirmResetPasswordNewPassword]:{message:"newPassword is required to confirmResetPassword"},[s.EmptyResendSignUpCodeUsername]:{message:"username is required to confirmSignUp"},[s.EmptyResetPasswordUsername]:{message:"username is required to resetPassword"},[s.EmptySignInPassword]:{message:"password is required to signIn"},[s.EmptySignInUsername]:{message:"username is required to signIn"},[s.EmptySignUpPassword]:{message:"password is required to signUp"},[s.EmptySignUpUsername]:{message:"username is required to signUp"},[s.CustomAuthSignInPassword]:{message:"A password is not needed when signing in with CUSTOM_WITHOUT_SRP",recoverySuggestion:"Do not include a password in your signIn call."},[s.IncorrectMFAMethod]:{message:"Incorrect MFA method was chosen. It should be either SMS, TOTP, or EMAIL",recoverySuggestion:"Try to pass SMS, TOTP, or EMAIL as the challengeResponse"},[s.EmptyVerifyTOTPSetupCode]:{message:"code is required to verifyTotpSetup"},[s.EmptyUpdatePassword]:{message:"oldPassword and newPassword are required to changePassword"},[s.EmptyConfirmUserAttributeCode]:{message:"confirmation code is required to confirmUserAttribute"}};(n=o||(o={})).DEFAULT_MSG="Authentication Error",n.EMPTY_EMAIL="Email cannot be empty",n.EMPTY_PHONE="Phone number cannot be empty",n.EMPTY_USERNAME="Username cannot be empty",n.INVALID_USERNAME="The username should either be a string or one of the sign in types",n.EMPTY_PASSWORD="Password cannot be empty",n.EMPTY_CODE="Confirmation code cannot be empty",n.SIGN_UP_ERROR="Error creating account",n.NO_MFA="No valid MFA method provided",n.INVALID_MFA="Invalid MFA type",n.EMPTY_CHALLENGE="Challenge response cannot be empty",n.NO_USER_SESSION="Failed to get the session because the user is empty",n.NETWORK_ERROR="Network Error",n.DEVICE_CONFIG="Device tracking has not been configured in this User Pool",n.AUTOSIGNIN_ERROR="Please use your credentials to sign in",n.OAUTH_ERROR="Couldn't finish OAuth flow, check your User Pool HostedUI settings",(i=a||(a={})).SignInException="SignInException",i.OAuthSignInError="OAuthSignInException",e.s(["AuthErrorCodes",()=>a,"validationErrorMap",()=>t],7846);var r,n,i,s,o,a,l=e.i(37422);function d(e,r){let{message:n,recoverySuggestion:i}=t[r];if(!e)throw new l.AuthError({name:r,message:n,recoverySuggestion:i})}e.s(["assertValidationError",()=>d],86131)},82306,e=>{"use strict";var t=e.i(29511),r=e.i(58138),n=e.i(16755),i=e.i(10641),s=e.i(26799),o=e.i(95173),a=e.i(69675),l=e.i(86131),d=e.i(30811),u=e.i(29423),m=e.i(76823),c=e.i(72429),p=e.i(5809),g=e.i(37422),f=e.i(63116),S=e.i(48050),h=e.i(5949);function y(e,t){let r;return n=>{r||e(...n),clearTimeout(r),r=setTimeout(()=>{r=void 0},t)}}let C=y(function(e,t,r){let n=Date.now(),i=setInterval(async()=>{if(Date.now()-n>18e4)clearInterval(i),r(new g.AuthError({name:S.AUTO_SIGN_IN_EXCEPTION,message:"The account was not confirmed on time.",recoverySuggestion:"Try to verify your account by clicking the link sent your email or phone and then login manually."})),(0,f.resetAutoSignIn)();else try{let r=await (0,p.signIn)(e);"CONFIRM_SIGN_UP"!==r.nextStep.signInStep&&(t(r),clearInterval(i),(0,f.resetAutoSignIn)())}catch(e){clearInterval(i),r(e),(0,f.resetAutoSignIn)()}},5e3)},300),E=y(U,300);async function U(e,t,r){try{let r=e?.options?.authFlowType==="USER_AUTH"?await (0,h.signInWithUserAuth)(e):await (0,p.signIn)(e);t(r),(0,f.resetAutoSignIn)()}catch(e){r(e),(0,f.resetAutoSignIn)()}}function w(e){return async()=>new Promise((t,r)=>{E([e,t,r])})}var I=e.i(24135),A=e.i(49147),v=e.i(93968),P=e.i(88125),x=e.i(7846),b=e.i(67038),N=e.i(48532),T=e.i(14970),R=e.i(9994),_=e.i(14258),O=e.i(93420),M=e.i(52195);async function j(e){let t,{username:r,password:n,options:i}=e,p=s.Amplify.getConfig().Auth?.Cognito,S=p?.signUpVerificationMethod??"code",{clientMetadata:h,validationData:y,autoSignIn:E}=e.options??{};(0,o.assertTokenProviderConfig)(p),(0,l.assertValidationError)(!!r,d.AuthValidationErrorCode.EmptySignUpUsername);let U="boolean"!=typeof E?E:void 0,j={username:r,options:U};U?.authFlowType!=="CUSTOM_WITHOUT_SRP"&&(j.password=n);let{userPoolId:D,userPoolClientId:V,userPoolEndpoint:F}=p,L=(t={endpointResolver:(0,O.createCognitoUserPoolEndpointResolver)({endpointOverride:F})},(0,v.composeServiceApi)(R.cognitoUserPoolTransferHandler,(0,T.createUserPoolSerializer)("SignUp"),async e=>{if(e.statusCode>=300){let t=await (0,P.parseJsonError)(e);if((0,b.assertServiceError)(t),t.name===N.SignUpException.InvalidParameterException&&/'password'/.test(t.message)&&/Member must not be null/.test(t.message)){let e=d.AuthValidationErrorCode.EmptySignUpPassword,{message:t,recoverySuggestion:r}=x.validationErrorMap[e];throw new g.AuthError({name:e,message:t,recoverySuggestion:r})}throw new g.AuthError({name:t.name,message:t.message})}return(0,P.parseJsonBody)(e)},{..._.DEFAULT_SERVICE_CLIENT_API_CONFIG,...t})),k={Username:r,Password:void 0,UserAttributes:i?.userAttributes&&(0,m.toAttributeType)(i?.userAttributes),ClientMetadata:h,ValidationData:y&&(0,m.toAttributeType)(y),ClientId:V,UserContextData:(0,I.getUserContextData)({username:r,userPoolId:D,userPoolClientId:V})};n&&(k.Password=n);let{UserSub:q,CodeDeliveryDetails:G,UserConfirmed:H,Session:z}=await L({region:(0,u.getRegionFromUserPoolId)(D),userAgentValue:(0,A.getAuthUserAgentValue)(a.AuthAction.SignUp)},k);(U||!0===E)&&(M.autoSignInStore.dispatch({type:"START"}),M.autoSignInStore.dispatch({type:"SET_USERNAME",value:r}),M.autoSignInStore.dispatch({type:"SET_SESSION",value:z}));let B={destination:G?.Destination,deliveryMedium:G?.DeliveryMedium,attributeName:G?.AttributeName},Y=M.autoSignInStore.getState().active;if(H)return Y?((0,f.setAutoSignIn)(w(j)),{isSignUpComplete:!0,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN"},userId:q}):{isSignUpComplete:!0,nextStep:{signUpStep:"DONE"},userId:q};if(Y){let e,t;if("link"===S)return(0,f.setAutoSignIn)(async()=>new Promise((e,t)=>{C([j,e,t])})),{isSignUpComplete:!1,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN",codeDeliveryDetails:B},userId:q};e=c.HubInternal.listen("auth-internal",async({payload:t})=>{if("confirmSignUp"===t.event){let r=t.data;r?.isSignUpComplete&&(c.HubInternal.dispatch("auth-internal",{event:"autoSignIn"}),(0,f.setAutoSignIn)(w(j)),e())}}),t=setTimeout(()=>{e(),clearTimeout(t),(0,f.resetAutoSignIn)()},18e4)}return{isSignUpComplete:!1,nextStep:{signUpStep:"CONFIRM_SIGN_UP",codeDeliveryDetails:B},userId:q}}var D=e.i(98531);async function V(e){let t,{username:r,confirmationCode:n,options:i}=e,m=s.Amplify.getConfig().Auth?.Cognito;(0,o.assertTokenProviderConfig)(m);let{userPoolId:p,userPoolClientId:g,userPoolEndpoint:S}=m,h=i?.clientMetadata;(0,l.assertValidationError)(!!r,d.AuthValidationErrorCode.EmptyConfirmSignUpUsername),(0,l.assertValidationError)(!!n,d.AuthValidationErrorCode.EmptyConfirmSignUpCode);let y=(0,I.getUserContextData)({username:r,userPoolId:p,userPoolClientId:g}),C=(t={endpointResolver:(0,O.createCognitoUserPoolEndpointResolver)({endpointOverride:S})},(0,v.composeServiceApi)(R.cognitoUserPoolTransferHandler,(0,T.createUserPoolSerializer)("ConfirmSignUp"),(0,D.createUserPoolDeserializer)(),{..._.DEFAULT_SERVICE_CLIENT_API_CONFIG,...t})),{Session:E}=await C({region:(0,u.getRegionFromUserPoolId)(m.userPoolId),userAgentValue:(0,A.getAuthUserAgentValue)(a.AuthAction.ConfirmSignUp)},{Username:r,ConfirmationCode:n,ClientMetadata:h,ForceAliasCreation:i?.forceAliasCreation,ClientId:m.userPoolClientId,UserContextData:y});return new Promise((e,t)=>{try{let t={isSignUpComplete:!0,nextStep:{signUpStep:"DONE"}},n=M.autoSignInStore.getState();if(!n.active||n.username!==r){e(t),(0,f.resetAutoSignIn)();return}M.autoSignInStore.dispatch({type:"SET_SESSION",value:E});let i=c.HubInternal.listen("auth-internal",({payload:t})=>{"autoSignIn"===t.event&&(e({isSignUpComplete:!0,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN"}}),i())});c.HubInternal.dispatch("auth-internal",{event:"confirmSignUp",data:t})}catch(e){t(e)}})}async function F(e){let t,{username:r}=e;(0,l.assertValidationError)(!!r,d.AuthValidationErrorCode.EmptySignUpUsername);let n=s.Amplify.getConfig().Auth?.Cognito;(0,o.assertTokenProviderConfig)(n);let{userPoolClientId:i,userPoolId:m,userPoolEndpoint:c}=n,p=e.options?.clientMetadata,g=(0,I.getUserContextData)({username:r,userPoolId:m,userPoolClientId:i}),f=(t={endpointResolver:(0,O.createCognitoUserPoolEndpointResolver)({endpointOverride:c})},(0,v.composeServiceApi)(R.cognitoUserPoolTransferHandler,(0,T.createUserPoolSerializer)("ResendConfirmationCode"),(0,D.createUserPoolDeserializer)(),{..._.DEFAULT_SERVICE_CLIENT_API_CONFIG,...t})),{CodeDeliveryDetails:S}=await f({region:(0,u.getRegionFromUserPoolId)(n.userPoolId),userAgentValue:(0,A.getAuthUserAgentValue)(a.AuthAction.ResendSignUpCode)},{Username:r,ClientMetadata:p,ClientId:n.userPoolClientId,UserContextData:g}),{DeliveryMedium:h,AttributeName:y,Destination:C}={...S};return{destination:C,deliveryMedium:h,attributeName:y||void 0}}var L=e.i(70295),k=e.i(67881),q=e.i(23750),G=e.i(10708),H=e.i(70065),z=e.i(90768);function B(){let e=(0,n.useRouter)(),[s,o]=(0,r.useState)(""),[a,l]=(0,r.useState)(""),[d,u]=(0,r.useState)(""),[m,c]=(0,r.useState)(""),[p,g]=(0,r.useState)(""),[f,S]=(0,r.useState)("signup"),[h,y]=(0,r.useState)(""),[C,E]=(0,r.useState)(""),[U,w]=(0,r.useState)(!1),[I,A]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{try{await (0,L.getCurrentUser)(),e.replace("/home")}catch(e){A(!1)}})()},[e]);let v=async t=>{if(t.preventDefault(),y(""),E(""),d!==m)return void y("Passwords do not match");w(!0);try{let{nextStep:t}=await j({username:s,password:d,options:{userAttributes:{email:a,name:s}}});"CONFIRM_SIGN_UP"===t.signUpStep?(S("verify"),E("Account created! Please check your email for the code.")):e.push("/signin")}catch(e){console.error(e),y(e.message||"Sign up failed")}finally{w(!1)}},P=async t=>{t.preventDefault(),y(""),w(!0);try{await V({username:s,confirmationCode:p}),e.push("/signin")}catch(e){y(e.message||"Verification failed")}finally{w(!1)}},x=async()=>{y(""),E("");try{await F({username:s}),E("Code resent successfully. Please check your email.")}catch(e){y(e.message||"Failed to resend code")}};return I?(0,t.jsx)("div",{className:"flex min-h-screen w-full items-center justify-center bg-white",children:(0,t.jsx)(z.Loader2,{className:"h-8 w-8 animate-spin text-gray-500"})}):(0,t.jsx)("div",{className:"flex min-h-screen w-full items-center justify-center bg-white p-4",children:(0,t.jsxs)(H.Card,{className:"w-full max-w-md",children:[(0,t.jsxs)(H.CardHeader,{children:[(0,t.jsx)(H.CardTitle,{className:"text-2xl",children:"signup"===f?"Sign Up":"Verify Account"}),(0,t.jsx)(H.CardDescription,{children:"signup"===f?"Create a new account to get started":`Enter the code sent to ${a}`})]}),(0,t.jsxs)(H.CardContent,{children:[h&&(0,t.jsx)("div",{className:"mb-4 text-sm text-red-500 font-medium",children:h}),C&&(0,t.jsx)("div",{className:"mb-4 text-sm text-green-600 font-medium",children:C}),"signup"===f?(0,t.jsxs)("form",{onSubmit:v,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(G.Label,{htmlFor:"username",children:"Username"}),(0,t.jsx)(q.Input,{id:"username",type:"text",placeholder:"Enter username",value:s,onChange:e=>o(e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(G.Label,{htmlFor:"email",children:"Email"}),(0,t.jsx)(q.Input,{id:"email",type:"email",placeholder:"Enter email",value:a,onChange:e=>l(e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(G.Label,{htmlFor:"password",children:"Password"}),(0,t.jsx)(q.Input,{id:"password",type:"password",placeholder:"Enter password",value:d,onChange:e=>u(e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(G.Label,{htmlFor:"confirmPassword",children:"Confirm Password"}),(0,t.jsx)(q.Input,{id:"confirmPassword",type:"password",placeholder:"Confirm password",value:m,onChange:e=>c(e.target.value),required:!0})]}),(0,t.jsxs)(k.Button,{type:"submit",className:"w-full",disabled:U,children:[U?(0,t.jsx)(z.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}):null,U?"Creating account...":"Sign Up"]}),(0,t.jsxs)("p",{className:"text-center text-sm text-muted-foreground",children:["Already have an account?"," ",(0,t.jsx)(i.default,{href:"/signin",className:"text-foreground underline hover:text-primary",children:"Sign in"})]})]}):(0,t.jsxs)("form",{onSubmit:P,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(G.Label,{htmlFor:"code",children:"Verification Code"}),(0,t.jsx)(q.Input,{id:"code",type:"text",placeholder:"Enter 6-digit code",value:p,onChange:e=>g(e.target.value),required:!0})]}),(0,t.jsxs)(k.Button,{type:"submit",className:"w-full",disabled:U,children:[U?(0,t.jsx)(z.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}):null,U?"Verifying...":"Confirm Account"]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm mt-4",children:[(0,t.jsx)("button",{type:"button",onClick:x,className:"text-primary hover:underline",children:"Resend Code"}),(0,t.jsx)("button",{type:"button",onClick:()=>S("signup"),className:"text-muted-foreground hover:text-foreground",children:"Back to Sign Up"})]})]})]})]})})}e.s(["default",()=>B],82306)}]);